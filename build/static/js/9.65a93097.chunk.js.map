{"version":3,"sources":["components/Card/index.js","components/Card/index.module.scss","api/auth.js","views/ProfilePage/index.module.scss","views/ProfilePage/index.js"],"names":["Card","title","action","children","className","styles","card","cardTitle","cardAction","cn","cardBody","cardBodyWithoutTitle","module","exports","login","a","email","password","axios","post","process","register","name","method","headers","url","data","getUserDetails","token","getJWToken","get","Authorization","updateUserDetails","ProfilePage","setTitle","useContext","TitleContext","useEffect","Form","useForm","form","loadUserData","res","status","setFieldsValue","notificationWrapper","message","changeProfile","values","password2","row","col","exit","type","onClick","logout","onFinish","layout","requiredMark","colon","autoComplete","Item","label","rules","required","readOnly","hasFeedback","Password","dependencies","getFieldValue","validator","_","value","Promise","reject","Error","resolve","htmlType"],"mappings":"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","file":"static/js/9.65a93097.chunk.js","sourcesContent":["import PropTypes from 'prop-types';\r\nimport cn from 'classnames';\r\nimport styles from './index.module.scss';\r\n\r\nconst Card = ({ title, action, children }) => (\r\n  <div className={styles.card}>\r\n    {title && (\r\n      <div className={styles.cardTitle}>\r\n        <span>{title}</span>\r\n        {action && (\r\n          <div className={styles.cardAction}>{action}</div>\r\n        )}\r\n      </div>\r\n    )}\r\n    <div className={cn(styles.cardBody, { [styles.cardBodyWithoutTitle]: !title })}>\r\n      {children}\r\n    </div>\r\n  </div>\r\n);\r\n\r\nCard.propTypes = {\r\n  title: PropTypes.string,\r\n  children: PropTypes.node,\r\n  action: PropTypes.node,\r\n};\r\n\r\nexport default Card;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"Card_card__2SUbp\",\"cardTitle\":\"Card_cardTitle__3YclI\",\"cardBody\":\"Card_cardBody__1loVX\",\"cardBodyWithoutTitle\":\"Card_cardBodyWithoutTitle__1DM1j\",\"cardMatchDate\":\"Card_cardMatchDate__33GwN\"};","import axios from 'axios';\r\nimport { getJWToken } from '../helpers/authHelper';\r\n\r\nexport const login = async ({ email, password }) => await axios.post(`${process.env.REACT_APP_LOCAL_API}/users/login`, { email, password });\r\n\r\nexport const register = async ({ email, name, password }) => axios({\r\n  method: 'post',\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n  url: `${process.env.REACT_APP_LOCAL_API}/users/register`,\r\n  data: { email, name, password },\r\n});\r\n\r\nexport const getUserDetails = async () => {\r\n  const token = getJWToken();\r\n  return await axios.get(`${process.env.REACT_APP_LOCAL_API}/users/me`, {\r\n    headers: {\r\n      Authorization: token,\r\n    },\r\n  });\r\n};\r\n\r\nexport const updateUserDetails = async ({ email, name, password }) => {\r\n  const token = getJWToken();\r\n  return await axios({\r\n    method: 'post',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      Authorization: token,\r\n    },\r\n    url: `${process.env.REACT_APP_LOCAL_API}/users/me`,\r\n    data: { email, name, password },\r\n  });\r\n};\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"row\":\"ProfilePage_row__91pD6\",\"col\":\"ProfilePage_col__XbcHM\",\"exit\":\"ProfilePage_exit__2-MiM\"};","import {\r\n  Input, Form, Button, Divider,\r\n} from 'antd';\r\nimport { useContext, useEffect } from 'react';\r\nimport { getUserDetails, updateUserDetails } from '../../api/auth';\r\nimport { TitleContext } from '../../utils/contexts';\r\nimport styles from './index.module.scss';\r\nimport Card from '../../components/Card';\r\nimport { notificationWrapper } from '../../helpers/notification';\r\nimport { logout } from '../../helpers/authHelper';\r\n\r\nfunction ProfilePage() {\r\n  const { setTitle } = useContext(TitleContext);\r\n  useEffect(() => {\r\n    setTitle('Профіль');\r\n  }, [setTitle]);\r\n\r\n  const [form] = Form.useForm();\r\n  useEffect(() => {\r\n    const loadUserData = async () => {\r\n      try {\r\n        const res = await getUserDetails();\r\n        if (res.status && res.status === 200) {\r\n          form.setFieldsValue({\r\n            name: res.data.name,\r\n            email: res.data.email,\r\n          });\r\n        }\r\n      } catch (error) {\r\n        notificationWrapper(true, error.message);\r\n      }\r\n    };\r\n    loadUserData();\r\n  }, []);\r\n\r\n  const changeProfile = async (values) => {\r\n    if (values.password !== values.password2) {\r\n      notificationWrapper(true, 'Пароль не співпадають');\r\n      return;\r\n    }\r\n    try {\r\n      const res = await updateUserDetails(values);\r\n      if (res.status && res.status === 201) {\r\n        form.setFieldsValue({\r\n          name: res.data.name,\r\n          email: res.data.email,\r\n        });\r\n        notificationWrapper(false, 'Профіль успішно оновлено');\r\n      }\r\n    } catch (error) {\r\n      notificationWrapper(true, error.message);\r\n    }\r\n  };\r\n  const onFinish = (values) => {\r\n    changeProfile(values);\r\n  };\r\n\r\n  return (\r\n    <div className={styles.row}>\r\n      <div className={styles.col}>\r\n        <Card\r\n          title=\"Оновити профіль\"\r\n          action={\r\n            <button className={styles.exit} type=\"button\" onClick={logout}>Вийти</button>\r\n          }\r\n        >\r\n          <Form\r\n            form={form}\r\n            className=\"sign-in-form\"\r\n            onFinish={onFinish}\r\n            layout=\"vertical\"\r\n            name=\"signin-form\"\r\n            requiredMark={false}\r\n            colon={false}\r\n            autoComplete=\"chrome-off\"\r\n          >\r\n            <Form.Item\r\n              label=\"Email\"\r\n              name=\"email\"\r\n              rules={[{ required: true, message: 'Введіть ваш email' }]}\r\n            >\r\n              <Input readOnly />\r\n            </Form.Item>\r\n            <Form.Item\r\n              label=\"Ім'я\"\r\n              name=\"name\"\r\n              rules={[{ required: true, message: 'Введіть ваше ім\\'я' }]}\r\n            >\r\n              <Input />\r\n            </Form.Item>\r\n            <Divider />\r\n            <Form.Item\r\n              label=\"Новий пароль\"\r\n              name=\"password\"\r\n              hasFeedback\r\n              rules={[{ message: 'Введіть ваш новий пароль' }]}\r\n            >\r\n              <Input.Password />\r\n            </Form.Item>\r\n            <Form.Item\r\n              label=\"Підтвердіть новий пароль\"\r\n              name=\"password2\"\r\n              dependencies={['password']}\r\n              hasFeedback\r\n              rules={[\r\n                { message: 'Підтвердіть ваш новий пароль' },\r\n                ({ getFieldValue }) => ({\r\n                  validator(_, value) {\r\n                    if (!value || getFieldValue('password') === value) {\r\n                      return Promise.resolve();\r\n                    }\r\n                    return Promise.reject(new Error('The two passwords that you entered do not match!'));\r\n                  },\r\n                }),\r\n              ]}\r\n            >\r\n              <Input.Password />\r\n            </Form.Item>\r\n            <Form.Item>\r\n              <Button type=\"primary\" htmlType=\"submit\">\r\n                Змінити\r\n              </Button>\r\n            </Form.Item>\r\n          </Form>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProfilePage;\r\n"],"sourceRoot":""}