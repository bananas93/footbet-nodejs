(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[2],{115:function(e,t,a){e.exports={app:"Layout_app__3TFhu",main:"Layout_main__27Le0",title:"Layout_title__3xg4F"}},116:function(e,t,a){e.exports={chatTitle:"ChatHeader_chatTitle__266Z2",chatUserName:"ChatHeader_chatUserName__VVTwC",closeButton:"ChatHeader_closeButton__1RAiG"}},117:function(e,t,a){e.exports={chat:"ChatList_chat__1-qMQ",chatEmpty:"ChatList_chatEmpty__1X_xG",chatList:"ChatList_chatList__Y3Dhe",chatListMessage:"ChatList_chatListMessage__3Iz1G",chatListMessageMy:"ChatList_chatListMessageMy__nCmtf",chatListWrapper:"ChatList_chatListWrapper__3_3Lt",chatListTime:"ChatList_chatListTime__36NoP",chatListWrap:"ChatList_chatListWrap__2_35c",chatListName:"ChatList_chatListName__3_VYp",chatListPage:"ChatList_chatListPage__1t1xH"}},127:function(e,t,a){e.exports={footer:"Footer_footer__3-QUP",footerCopyright:"Footer_footerCopyright__vYk-x"}},134:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(4),s=a(0);function c(){var e=Object(s.useState)(window.innerWidth),t=Object(n.a)(e,2),a=t[0],c=t[1],r=function(){c(window.innerWidth)};return Object(s.useEffect)((function(){return window.addEventListener("resize",r),function(){window.removeEventListener("resize",r)}}),[]),a<=640}},162:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return h}));var n=a(24),s=a(16),c=a.n(s),r=a(61),i=a.n(r),o=a(45),u=function(){var e=Object(n.a)(c.a.mark((function e(t,a,n){var s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Object(o.c)("JWToken"),e.next=3,i.a.get("".concat("https://footbet.pp.ua/api","/users/").concat(t,"/").concat(a,"/").concat(n),{headers:{Authorization:s}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),h=function(){var e=Object(n.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(o.c)("JWToken"),e.next=3,i.a.get("".concat("https://footbet.pp.ua/api","/users/me"),{headers:{Authorization:t}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},170:function(e,t,a){e.exports={loading:"Loading_loading__38WPi"}},172:function(e,t,a){e.exports={button:"Chat_button__3RGPj"}},182:function(e,t,a){},283:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a(25),c=a.n(s),r=(a(182),a(4)),i=a(47),o=a(174),u=a(6),h=a.n(u),l=a(33),d=a(48),j=a.n(d),b=a(7),m=function(){return Object(b.jsx)("header",{className:j.a.header,children:Object(b.jsxs)("nav",{className:j.a.headerNav,children:[Object(b.jsxs)("ul",{className:j.a.headerList,children:[Object(b.jsx)("li",{className:j.a.headerListItem,children:Object(b.jsx)(i.b,{to:"/",children:"\u0413\u043e\u043b\u043e\u0432\u043d\u0430"})}),Object(b.jsx)("li",{className:j.a.headerListItem,children:Object(b.jsx)(i.b,{to:"/tournaments",children:"\u0422\u0443\u0440\u043d\u0456\u0440\u0438"})}),Object(b.jsx)("li",{className:j.a.headerListItem,children:Object(b.jsx)(i.b,{to:"/rules",children:"\u041f\u0440\u0430\u0432\u0438\u043b\u0430"})})]}),Object(b.jsx)("ul",{className:j.a.headerAdditionalList,children:Object(b.jsx)("li",{className:j.a.headerAdditionalListItem,children:Object(b.jsx)(i.b,{to:"/profile",children:"\u041f\u0440\u043e\u0444\u0456\u043b\u044c"})})})]})})},f=a(127),p=a.n(f),g=function(){return Object(b.jsx)("footer",{className:p.a.footer,children:Object(b.jsx)("div",{className:p.a.footerCopyright,children:"footbet.pp.ua \xa9 2021 Created by David Amerov"})})},O=a(115),_=a.n(O),x=a(24),v=a(8),L=a(16),M=a.n(L),y=a(290),C=a(294),N=a(293),w=a(289),T=a(89),k=a.n(T),S=a(75),I=a(287),W=a(92),E=a(288),P=a(132),z=a(291),A=a(116),H=a.n(A);function B(e){var t=e.name,a=e.toggleShowChat;return Object(b.jsxs)("div",{className:H.a.chatTitle,children:[Object(b.jsx)("button",{type:"button",className:H.a.closeButton,onClick:a,children:Object(b.jsx)(P.a,{})}),Object(b.jsx)(E.a,{style:{backgroundColor:"#28374d"},icon:Object(b.jsx)(z.a,{})}),Object(b.jsx)("span",{className:H.a.chatUserName,children:t})]})}var R=a(292),F=a(171),J=a(88),U=a.n(J);function D(e){var t=e.handleSendMessage,a=Object(n.useContext)(l.d),s=Object(n.useState)(""),c=Object(r.a)(s,2),i=c[0],o=c[1],u=Object(n.useState)([]),h=Object(r.a)(u,2),d=h[0],j=h[1],m=Object(n.useContext)(l.b),f=function(){o(""),t(i),setTimeout((function(){var e=document.getElementById("chat-list");e.scrollTo(0,e.scrollHeight)}),100)};return Object(n.useEffect)((function(){var e=a.name;return m.on("typingUsers",(function(e){j(e)})),function(){m.emit("messageTyping",{name:e,typing:!1}),m.off("typingUsers")}}),[]),Object(b.jsxs)("div",{className:U.a.chatMessage,children:[Object(b.jsxs)("span",{className:U.a.chatMessageTyping,children:[d.map((function(e,t){return"".concat(t?", ":""," ").concat(e)}))," ",d.length?" \u043d\u0430\u0431\u0438\u0440\u0430\u0454 \u043f\u043e\u0432\u0456\u0434\u043e\u043c\u043b\u0435\u043d\u043d\u044f...":""]}),Object(b.jsxs)("div",{className:U.a.chatMessageRow,id:"message",children:[Object(b.jsx)(F.a,{onEnter:f,onChange:function(e){o(e);var t=a.name;e?m.emit("messageTyping",{name:t,typing:!0}):m.emit("messageTyping",{name:t,typing:!1})},value:i,fontFamily:"Rubik",height:40,placeholder:"\u041d\u0430\u043f\u0438\u0448\u0456\u0442\u044c \u043f\u043e\u0432\u0456\u0434\u043e\u043c\u043b\u0435\u043d\u043d\u044f"}),Object(b.jsx)("button",{onClick:f,disabled:!i.length||!i.replace(/\s/g,"").length,className:U.a.chatMessageButton,type:"submit",children:Object(b.jsx)(R.a,{})})]})]})}var V=a(117),X=a.n(V),Q=a(3),G=a(285),Y=a(284),q=function(e){var t=e.message,a=e.removeMessage;return Object(b.jsx)(Y.a,{children:Object(b.jsx)(Y.a.Item,{onClick:function(){return a(t)},children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"},"1")})},Z=a(54),$=a.n(Z),K=a(134),ee=function(e){var t=e.item,a=e.id,n=e.removeMessage,s=Object(K.a)();return Object(b.jsx)("li",{className:h()($.a.chatListMessage,Object(Q.a)({},$.a.chatListMessageMy,t.user.id===a)),children:Object(b.jsx)(G.a,{disabled:t.user.id!==a,overlay:Object(b.jsx)(q,{removeMessage:n,message:t}),trigger:[s?"click":"contextMenu"],children:Object(b.jsx)("div",{className:$.a.chatListWrapper,children:Object(b.jsxs)("div",{className:$.a.chatListWrap,children:[t.user.id!==a&&Object(b.jsx)("div",{className:$.a.chatListName,children:t.user.name}),Object(b.jsxs)("div",{className:$.a.chatListText,children:[t.message,Object(b.jsx)("span",{className:$.a.chatListTime,children:k()(t.createdAt).format("HH:mm")})]})]})})})})};function te(e){var t=e.messages,a=e.handleSendMessage,s=e.toggleShowChat,c=e.removeMessage,i=e.editMessage,o=Object(n.useContext)(l.d),u=o.id,h=o.name,d=Object(n.useState)(!0),j=Object(r.a)(d,2),m=j[0],f=j[1];return Object(n.useEffect)((function(){document.documentElement.style.overflow="hidden",window.localStorage.setItem("unreaded-messages",0),setTimeout((function(){var e;f(!1);var t=null===(e=document)||void 0===e?void 0:e.getElementById("chat-list");null===t||void 0===t||t.scrollTo(0,t.scrollHeight)}),100)}),[]),Object(b.jsxs)("div",{className:X.a.chat,children:[Object(b.jsx)(B,{name:h,toggleShowChat:s}),m?Object(b.jsx)(W.a,{}):Object(b.jsx)(b.Fragment,{children:t.length<1?Object(b.jsx)("div",{className:X.a.chatEmpty,children:Object(b.jsx)(S.a,{description:"\u041f\u043e\u0432\u0456\u0434\u043e\u043c\u043b\u0435\u043d\u044c \u0449\u0435 \u043d\u0435\u043c\u0430\u0454 \ud83d\ude22"})}):Object(b.jsx)("ul",{id:"chat-list",className:X.a.chatList,children:t.map((function(e){return Object(b.jsxs)("div",{children:[Object(b.jsx)(I.a,{styles:{fontWeight:"bold"},children:k()(e.date).format("LL")}),Object(b.jsx)(N.a,{component:"ul",className:"todo-list",children:e.days.map((function(e){return Object(b.jsx)(w.a,{classNames:"item",timeout:200,children:Object(b.jsx)(ee,{id:u,item:e,removeMessage:c,editMessage:i})},e.id)}))})]},e.id)}))})}),Object(b.jsx)(D,{handleSendMessage:a})]})}var ae=a(172),ne=a.n(ae),se=a(55),ce=a(61),re=a.n(ce),ie=a(45),oe=function(){var e=Object(x.a)(M.a.mark((function e(){var t;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(ie.b)("JWToken"),e.next=3,re.a.get("".concat("https://footbet.pp.ua/api","/chat"),{headers:{Authorization:t}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=Object(x.a)(M.a.mark((function e(t){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(ie.b)("JWToken"),e.next=3,re.a.delete("".concat("https://footbet.pp.ua/api","/chat/").concat(t),{headers:{Authorization:a}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function he(){var e=Object(n.useContext)(l.d),t=e.id,a=e.name,s=Object(n.useState)(!1),c=Object(r.a)(s,2),i=c[0],o=c[1],u=Object(n.useState)(0),h=Object(r.a)(u,2),d=h[0],j=h[1],m=Object(n.useState)([]),f=Object(r.a)(m,2),p=f[0],g=f[1],O=Object(n.useContext)(l.b),_=function(){o(!i)};Object(n.useEffect)((function(){var e=function(){var e=Object(x.a)(M.a.mark((function e(){var t;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oe();case 3:(t=e.sent).status&&200===t.status&&g(t.data),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),404!==e.t0.response.status&&Object(se.a)(!0,e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[i]),Object(n.useEffect)((function(){return j(Number(window.localStorage.getItem("unreaded-messages"))||0),O.on("message",(function(e){j((function(e){return window.localStorage.setItem("unreaded-messages",e+1),e+1})),g((function(t){var a=Object(v.a)(t);return a[t.length-1].days.push(e),a}))})),function(){O.off("message"),document.documentElement.style.overflow="unset"}}),[i]);var L=function(e){var t=e.createdAt.split("T")[0],a=Object(v.a)(p),n=a.findIndex((function(e){return e.date===t})),s=a[n].days.findIndex((function(t){return Number(t.id)===Number(e.id)}));a[n].days.splice(s,1),g(a)},N=function(){var e=Object(x.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(t),e.prev=1,e.next=4,ue(t.id);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),Object(se.a)(!0,e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsx)(b.Fragment,{children:i?Object(b.jsx)(te,{messages:p,handleSendMessage:function(e){O.emit("chatMessage",e);var n={id:p[p.length-1].days[p[p.length-1].days.length-1].id+10,message:e,createdAt:(new Date).toISOString(),user:{id:t,name:a}},s=Object(v.a)(p);s[p.length-1].days.push(n),g(s)},toggleShowChat:_,removeMessage:N}):Object(b.jsx)("div",{className:ne.a.button,children:Object(b.jsx)("button",{onClick:_,type:"button",children:Object(b.jsx)(y.a,{size:"default",count:d,children:Object(b.jsx)(C.a,{style:{color:"#fff",fontSize:"25px"}})})})})})}var le=function(e){var t=e.auth,a=e.socket,s=e.user,c=e.children,i=Object(n.useState)("Footbet"),o=Object(r.a)(i,2),u=o[0],d=o[1];return Object(b.jsx)(l.a.Provider,{value:t,children:Object(b.jsx)(l.b.Provider,{value:a,children:Object(b.jsx)(l.d.Provider,{value:s,children:Object(b.jsx)(l.c.Provider,{value:{title:u,setTitle:d},children:Object(b.jsxs)("div",{className:h()(_.a.app,"app"),children:[t&&Object(b.jsx)(m,{}),Object(b.jsxs)("main",{className:_.a.main,children:[Object(b.jsx)("h1",{className:_.a.title,children:u}),c]}),Object(b.jsx)(g,{}),s&&a&&Object(b.jsx)(he,{})]})})})})})},de=a(15),je=Object(n.lazy)((function(){return a.e(11).then(a.bind(null,333))})),be=Object(n.lazy)((function(){return a.e(9).then(a.bind(null,334))})),me=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(1),a.e(5),a.e(6)]).then(a.bind(null,342))})),fe=Object(n.lazy)((function(){return a.e(10).then(a.bind(null,335))})),pe=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(8)]).then(a.bind(null,336))})),ge=Object(n.lazy)((function(){return Promise.all([a.e(13),a.e(12)]).then(a.bind(null,337))})),Oe=function(){return Object(de.h)([{path:"/",element:Object(b.jsx)(je,{})},{path:"/tournaments",element:Object(b.jsx)(be,{})},{path:"/tournament/:slug",element:Object(b.jsx)(me,{})},{path:"/rules",element:Object(b.jsx)(fe,{})},{path:"/profile",element:Object(b.jsx)(pe,{})},{path:"*",element:Object(b.jsx)(ge,{})}])},_e=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(1),a.e(7)]).then(a.bind(null,345))})),xe=function(){return Object(de.h)([{path:"/",element:Object(b.jsx)(_e,{})},{path:"*",element:Object(b.jsx)(de.a,{to:"/"})}])};var ve=function(){var e=Object(n.useRef)(null),t=Object(n.useState)(null),a=Object(r.a)(t,2),s=a[0],c=a[1],u=Object(n.useState)(null),h=Object(r.a)(u,2),l=h[0],d=h[1];Object(n.useEffect)((function(){if(null===e.current){var t=Object(ie.b)("JWToken");e.current=Object(o.a)("https://footbet.pp.ua",{query:{token:t}})}var a=e.current;try{c(a),a.open(),a.on("user",(function(e){d(JSON.parse(e))}))}catch(n){Object(se.a)(!0,n.message)}return function(){a.close()}}),[]);var j=Object(ie.a)();return Object(b.jsx)(i.a,{children:Object(b.jsx)(le,{socket:s,user:l,auth:j,children:Object(b.jsx)(n.Suspense,{fallback:Object(b.jsx)(W.a,{}),children:j?Object(b.jsx)(Oe,{}):Object(b.jsx)(xe,{})})})})},Le=function(e){e&&e instanceof Function&&a.e(14).then(a.bind(null,338)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),c(e),r(e)}))};c.a.render(Object(b.jsx)(ve,{}),document.getElementById("root")),Le()},33:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return i})),a.d(t,"d",(function(){return o}));var n=a(0),s=a.n(n),c=s.a.createContext(!1),r=s.a.createContext({}),i=s.a.createContext({}),o=s.a.createContext({})},45:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"e",(function(){return c})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return i})),a.d(t,"d",(function(){return o}));a(24);var n=a(1),s=(a(16),a(162),a(55),function(e){var t=document.cookie.match(new RegExp("(?:^|; )".concat(e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1"),"=([^;]*)")));return t?decodeURIComponent(t[1]):void 0}),c=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(a=Object(n.a)({path:"/"},a)).expires instanceof Date&&(a.expires=a.expires.toUTCString());var s="".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t));for(var c in a){s+="; ".concat(c);var r=a[c];!0!==r&&(s+="=".concat(r))}document.cookie=s},r=function(){return"Bearer ".concat(s("JWToken"))};function i(){return Boolean(s("JWToken"))}var o=function(){c("JWToken","",{"max-age":-1}),window.location.href="/"}},48:function(e,t,a){e.exports={header:"Header_header__MbTxY",headerNav:"Header_headerNav__2ruAc",headerList:"Header_headerList__2-Zjs",headerAdditionalList:"Header_headerAdditionalList__3IQHk",headerListItem:"Header_headerListItem__32yy-",headerAdditionalListItem:"Header_headerAdditionalListItem__1-w45"}},54:function(e,t,a){e.exports={chat:"Message_chat__2R0Nj",chatList:"Message_chatList__y4Vts",chatListMessage:"Message_chatListMessage__1RaLr",chatListMessageMy:"Message_chatListMessageMy__1XL9X",chatListWrapper:"Message_chatListWrapper__3yB5r",chatListTime:"Message_chatListTime__1bMf4",chatListWrap:"Message_chatListWrap__cLXjp",chatListName:"Message_chatListName__dhBnz",chatListPage:"Message_chatListPage__1tLLc"}},55:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(118),s=function(e,t){return e?n.a.error({message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430",description:t}):n.a.success({message:"\u0423\u0441\u043f\u0456\u0445",description:t})}},88:function(e,t,a){e.exports={chatMessage:"ChatMessage_chatMessage__12ego",chatMessageRow:"ChatMessage_chatMessageRow__2DJg9",chatMessagePage:"ChatMessage_chatMessagePage__3PNEr",chatMessageInput:"ChatMessage_chatMessageInput__XuO1Q",chatMessageEmoji:"ChatMessage_chatMessageEmoji__14bX7",chatMessageTyping:"ChatMessage_chatMessageTyping__iR3ww",chatMessageButton:"ChatMessage_chatMessageButton__3QVVF"}},92:function(e,t,a){"use strict";var n=a(189),s=a(170),c=a.n(s),r=a(7);t.a=function(){return Object(r.jsx)("div",{className:c.a.loading,children:Object(r.jsx)(n.a,{})})}}},[[283,3,4]]]);
//# sourceMappingURL=main.7fc81acb.chunk.js.map