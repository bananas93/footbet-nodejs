(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[3],{124:function(e,t,a){e.exports={app:"Layout_app__1F26c",main:"Layout_main__2gk5w",title:"Layout_title__3wAWD"}},125:function(e,t,a){e.exports={chatTitle:"ChatHeader_chatTitle__WJPXV",chatUserName:"ChatHeader_chatUserName__1TAYg",closeButton:"ChatHeader_closeButton__2IYD4"}},126:function(e,t,a){e.exports={chat:"ChatList_chat__18vs5",chatEmpty:"ChatList_chatEmpty__3JVib",chatList:"ChatList_chatList__3va2e",chatListMessage:"ChatList_chatListMessage__20VMr",chatListMessageMy:"ChatList_chatListMessageMy__WOrl6",chatListWrapper:"ChatList_chatListWrapper__k2YWW",chatListTime:"ChatList_chatListTime__nquCK",chatListWrap:"ChatList_chatListWrap__KfX5J",chatListName:"ChatList_chatListName__8sx0G",chatListPage:"ChatList_chatListPage__3KvQA"}},136:function(e,t,a){e.exports={footer:"Footer_footer__T1BI6",footerCopyright:"Footer_footerCopyright__1Nolv"}},170:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return h}));var n=a(22),s=a.n(n),c=a(31),r=a(65),i=a.n(r),o=a(50),u=function(){var e=Object(c.a)(s.a.mark((function e(t,a,n){var c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(o.c)("JWToken"),e.next=3,i.a.get("".concat("https://footbet.site/api","/users/").concat(t,"/").concat(a,"/").concat(n),{headers:{Authorization:c}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),h=function(){var e=Object(c.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(o.c)("JWToken"),e.next=3,i.a.get("".concat("https://footbet.site/api","/users/me"),{headers:{Authorization:t}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},180:function(e,t,a){e.exports={loading:"Loading_loading__3mczw"}},183:function(e,t,a){e.exports={button:"Chat_button__31vsn"}},193:function(e,t,a){},293:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),c=a(23),r=a.n(c),i=(a(193),a(19)),o=a(53),u=a(185),h=a(6),l=a.n(h),d=a(37),j=a(55),b=a.n(j),m=a(4),f=function(){return Object(m.jsx)("header",{className:b.a.header,children:Object(m.jsxs)("nav",{className:b.a.headerNav,children:[Object(m.jsxs)("ul",{className:b.a.headerList,children:[Object(m.jsx)("li",{className:b.a.headerListItem,children:Object(m.jsx)(o.b,{to:"/",children:"\u0413\u043e\u043b\u043e\u0432\u043d\u0430"})}),Object(m.jsx)("li",{className:b.a.headerListItem,children:Object(m.jsx)(o.b,{to:"/tournaments",children:"\u0422\u0443\u0440\u043d\u0456\u0440\u0438"})}),Object(m.jsx)("li",{className:b.a.headerListItem,children:Object(m.jsx)(o.b,{to:"/rules",children:"\u041f\u0440\u0430\u0432\u0438\u043b\u0430"})})]}),Object(m.jsx)("ul",{className:b.a.headerAdditionalList,children:Object(m.jsx)("li",{className:b.a.headerAdditionalListItem,children:Object(m.jsx)(o.b,{to:"/profile",children:"\u041f\u0440\u043e\u0444\u0456\u043b\u044c"})})})]})})},g=a(136),O=a.n(g),p=function(){return Object(m.jsx)("footer",{className:O.a.footer,children:Object(m.jsx)("div",{className:O.a.footerCopyright,children:"Footbet.site \xa9 2021 Created by David Amerov"})})},_=a(124),x=a.n(_),v=a(22),L=a.n(v),y=a(31),M=a(79),N=a(301),C=a(305),w=a(304),T=a(300),k=a(97),S=a.n(k),I=a(81),W=a(298),A=a(179),E=a(99),P=a(299),z=a(142),B=a(302),H=a(125),J=a.n(H);function F(e){var t=e.name,a=e.toggleShowChat;return Object(m.jsxs)("div",{className:J.a.chatTitle,children:[Object(m.jsx)("button",{type:"button",className:J.a.closeButton,onClick:a,children:Object(m.jsx)(z.a,{})}),Object(m.jsx)(P.a,{style:{backgroundColor:"#28374d"},icon:Object(m.jsx)(B.a,{})}),Object(m.jsx)("span",{className:J.a.chatUserName,children:t})]})}var R=a(303),D=a(187),U=a(95),q=a.n(U);function V(e){var t=e.handleSendMessage,a=Object(n.useContext)(d.d),s=Object(n.useState)(""),c=Object(i.a)(s,2),r=c[0],o=c[1],u=Object(n.useState)([]),h=Object(i.a)(u,2),l=h[0],j=h[1],b=Object(n.useContext)(d.b),f=function(){o(""),t(r),setTimeout((function(){var e=document.getElementById("chat-list");e.scrollTo(0,e.scrollHeight)}),0)};return Object(n.useEffect)((function(){var e=a.name;return b.on("typingUsers",(function(e){j(e)})),function(){b.emit("messageTyping",{name:e,typing:!1}),b.off("typingUsers")}}),[]),Object(m.jsxs)("div",{className:q.a.chatMessage,children:[Object(m.jsxs)("span",{className:q.a.chatMessageTyping,children:[l.map((function(e,t){return"".concat(t?", ":""," ").concat(e)}))," ",l.length?" \u043d\u0430\u0431\u0438\u0440\u0430\u0454 \u043f\u043e\u0432\u0456\u0434\u043e\u043c\u043b\u0435\u043d\u043d\u044f...":""]}),Object(m.jsxs)("div",{className:q.a.chatMessageRow,id:"message",children:[Object(m.jsx)(D.a,{onEnter:f,onChange:function(e){o(e);var t=a.name;e?b.emit("messageTyping",{name:t,typing:!0}):b.emit("messageTyping",{name:t,typing:!1})},value:r,fontFamily:"Rubik",height:40,placeholder:"\u041d\u0430\u043f\u0438\u0448\u0456\u0442\u044c \u043f\u043e\u0432\u0456\u0434\u043e\u043c\u043b\u0435\u043d\u043d\u044f"}),Object(m.jsx)("button",{onClick:f,disabled:!r.length||!r.replace(/\s/g,"").length,className:q.a.chatMessageButton,type:"submit",children:Object(m.jsx)(R.a,{})})]})]})}var K=a(126),X=a.n(K),Y=a(96),Z=a(295),G=a(294),Q=function(e){var t=e.message,a=e.removeMessage;return Object(m.jsx)(G.a,{children:Object(m.jsx)(G.a.Item,{onClick:function(){return a(t)},children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"},"1")})},$=a(60),ee=a.n($),te=function(e){var t=e.item,a=e.id,n=e.removeMessage;return Object(m.jsx)("li",{className:l()(ee.a.chatListMessage,Object(Y.a)({},ee.a.chatListMessageMy,t.user.id===a)),children:Object(m.jsx)(Z.a,{overlay:Object(m.jsx)(Q,{removeMessage:n,message:t}),trigger:["contextMenu"],children:Object(m.jsx)("div",{className:ee.a.chatListWrapper,children:Object(m.jsxs)("div",{className:ee.a.chatListWrap,children:[t.user.id!==a&&Object(m.jsx)("div",{className:ee.a.chatListName,children:t.user.name}),Object(m.jsxs)("div",{className:ee.a.chatListText,children:[t.message,Object(m.jsx)("span",{className:ee.a.chatListTime,children:S()(t.createdAt).format("HH:mm")})]})]})})})})};function ae(e){var t=e.messages,a=e.handleSendMessage,s=e.toggleShowChat,c=e.removeMessage,r=Object(n.useContext)(d.d),o=r.id,u=r.name,h=Object(A.useState)(!0),l=Object(i.a)(h,2),j=l[0],b=l[1];return Object(n.useEffect)((function(){var e;document.documentElement.style.overflow="hidden",window.localStorage.setItem("unreaded-messages",0);var t=null===(e=document)||void 0===e?void 0:e.getElementById("chat-list");null===t||void 0===t||t.scrollTo(0,t.scrollHeight),setTimeout((function(){b(!1)}),100)}),[]),Object(m.jsxs)("div",{className:X.a.chat,children:[Object(m.jsx)(F,{name:u,toggleShowChat:s}),j?Object(m.jsx)(E.a,{}):Object(m.jsx)(m.Fragment,{children:t.length<1?Object(m.jsx)("div",{className:X.a.chatEmpty,children:Object(m.jsx)(I.a,{description:"\u041f\u043e\u0432\u0456\u0434\u043e\u043c\u043b\u0435\u043d\u044c \u0449\u0435 \u043d\u0435\u043c\u0430\u0454 \ud83d\ude22"})}):Object(m.jsx)("ul",{id:"chat-list",className:X.a.chatList,children:t.map((function(e){return Object(m.jsxs)("div",{children:[Object(m.jsx)(W.a,{styles:{fontWeight:"bold"},children:S()(e.date).format("LL")}),Object(m.jsx)(w.a,{component:"ul",className:"todo-list",children:e.days.map((function(e){return Object(m.jsx)(T.a,{classNames:"item",timeout:200,children:Object(m.jsx)(te,{id:o,item:e,removeMessage:c})},e.id)}))})]},e.id)}))})}),Object(m.jsx)(V,{handleSendMessage:a})]})}var ne=a(183),se=a.n(ne),ce=a(83),re=a(65),ie=a.n(re),oe=a(50),ue=function(){var e=Object(y.a)(L.a.mark((function e(){var t;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(oe.b)("JWToken"),e.next=3,ie.a.get("".concat("https://footbet.site/api","/chat"),{headers:{Authorization:t}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),he=function(){var e=Object(y.a)(L.a.mark((function e(t){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(oe.b)("JWToken"),e.next=3,ie.a.delete("".concat("https://footbet.site/api","/chat/").concat(t),{headers:{Authorization:a}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function le(){var e=Object(n.useContext)(d.d),t=e.id,a=e.name,s=Object(n.useState)(!1),c=Object(i.a)(s,2),r=c[0],o=c[1],u=Object(n.useState)(0),h=Object(i.a)(u,2),l=h[0],j=h[1],b=Object(n.useState)([]),f=Object(i.a)(b,2),g=f[0],O=f[1],p=Object(n.useContext)(d.b),_=function(){o(!r)};Object(n.useEffect)((function(){var e=function(){var e=Object(y.a)(L.a.mark((function e(){var t;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue();case 3:(t=e.sent).status&&200===t.status&&O(t.data),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),404!==e.t0.response.status&&Object(ce.a)(!0,e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[r]),Object(n.useEffect)((function(){return j(Number(window.localStorage.getItem("unreaded-messages"))||0),p.on("message",(function(e){j((function(e){return window.localStorage.setItem("unreaded-messages",e+1),e+1})),O((function(t){var a=Object(M.a)(t);return a[t.length-1].days.push(e),a}))})),function(){p.off("message"),document.documentElement.style.overflow="unset"}}),[r]);var x=function(e){var t=e.createdAt.split("T")[0],a=Object(M.a)(g),n=a.findIndex((function(e){return e.date===t})),s=a[n].days.findIndex((function(t){return Number(t.id)===Number(e.id)}));a[n].days.splice(s,1),O(a)},v=function(){var e=Object(y.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(t),e.prev=1,e.next=4,he(t.id);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),Object(ce.a)(!0,e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)(m.Fragment,{children:r?Object(m.jsx)(ae,{messages:g,handleSendMessage:function(e){p.emit("chatMessage",e);var n={id:g[g.length-1].days[g[g.length-1].days.length-1].id+10,message:e,createdAt:(new Date).toISOString(),user:{id:t,name:a}},s=Object(M.a)(g);s[g.length-1].days.push(n),O(s)},toggleShowChat:_,removeMessage:v}):Object(m.jsx)("div",{className:se.a.button,children:Object(m.jsx)("button",{onClick:_,type:"button",children:Object(m.jsx)(N.a,{size:"default",count:l,children:Object(m.jsx)(C.a,{style:{color:"#fff",fontSize:"25px"}})})})})})}var de=function(e){var t=e.auth,a=e.socket,s=e.user,c=e.children,r=Object(n.useState)("Footbet"),o=Object(i.a)(r,2),u=o[0],h=o[1];return Object(m.jsx)(d.a.Provider,{value:t,children:Object(m.jsx)(d.b.Provider,{value:a,children:Object(m.jsx)(d.d.Provider,{value:s,children:Object(m.jsx)(d.c.Provider,{value:{title:u,setTitle:h},children:Object(m.jsxs)("div",{className:l()(x.a.app,"app"),children:[t&&Object(m.jsx)(f,{}),Object(m.jsxs)("main",{className:x.a.main,children:[Object(m.jsx)("h1",{className:x.a.title,children:u}),c]}),Object(m.jsx)(p,{}),s&&a&&Object(m.jsx)(le,{})]})})})})})},je=a(10),be=Object(n.lazy)((function(){return a.e(12).then(a.bind(null,344))})),me=Object(n.lazy)((function(){return a.e(10).then(a.bind(null,345))})),fe=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(1),a.e(6),a.e(7)]).then(a.bind(null,352))})),ge=Object(n.lazy)((function(){return a.e(11).then(a.bind(null,346))})),Oe=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(2),a.e(9)]).then(a.bind(null,347))})),pe=Object(n.lazy)((function(){return Promise.all([a.e(14),a.e(13)]).then(a.bind(null,348))})),_e=function(){return Object(je.h)([{path:"/",element:Object(m.jsx)(be,{})},{path:"/tournaments",element:Object(m.jsx)(me,{})},{path:"/tournament/:slug",element:Object(m.jsx)(fe,{})},{path:"/rules",element:Object(m.jsx)(ge,{})},{path:"/profile",element:Object(m.jsx)(Oe,{})},{path:"*",element:Object(m.jsx)(pe,{})}])},xe=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(1),a.e(2),a.e(8)]).then(a.bind(null,357))})),ve=function(){return Object(je.h)([{path:"/",element:Object(m.jsx)(xe,{})},{path:"*",element:Object(m.jsx)(je.a,{to:"/"})}])};var Le=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(null),r=Object(i.a)(c,2),h=r[0],l=r[1];Object(n.useEffect)((function(){var e=Object(oe.b)("JWToken"),t=Object(u.a)("https://footbet.site",{query:{token:e}});return s(t),t.on("user",(function(e){l(JSON.parse(e))})),function(){t.close()}}),[]);var d=Object(oe.a)();return Object(m.jsx)(o.a,{children:Object(m.jsx)(de,{socket:a,user:h,auth:d,children:Object(m.jsx)(n.Suspense,{fallback:Object(m.jsx)(E.a,{}),children:d?Object(m.jsx)(_e,{}):Object(m.jsx)(ve,{})})})})},ye=function(e){e&&e instanceof Function&&a.e(15).then(a.bind(null,349)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),c(e),r(e)}))};r.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(Le,{})}),document.getElementById("root")),ye()},37:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return i})),a.d(t,"d",(function(){return o}));var n=a(0),s=a.n(n),c=s.a.createContext(!1),r=s.a.createContext({}),i=s.a.createContext({}),o=s.a.createContext({})},50:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return c}));a(22),a(31),a(94),a(170),a(83);var n=function(e){var t=document.cookie.match(new RegExp("(?:^|; )".concat(e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1"),"=([^;]*)")));return t?decodeURIComponent(t[1]):void 0},s=function(){return"Bearer ".concat(n("JWToken"))};function c(){return Boolean(n("JWToken"))}},55:function(e,t,a){e.exports={header:"Header_header__1OmjH",headerNav:"Header_headerNav__1KtTN",headerList:"Header_headerList__3a_My",headerAdditionalList:"Header_headerAdditionalList__VAqhq",headerListItem:"Header_headerListItem__ZfNQt",headerAdditionalListItem:"Header_headerAdditionalListItem__2jrXD"}},60:function(e,t,a){e.exports={chat:"Message_chat__2ALNA",chatList:"Message_chatList__24kzI",chatListMessage:"Message_chatListMessage__1tbSy",chatListMessageMy:"Message_chatListMessageMy__yv4PX",chatListWrapper:"Message_chatListWrapper__23BRB",chatListTime:"Message_chatListTime__1lYDR",chatListWrap:"Message_chatListWrap__1FwCZ",chatListName:"Message_chatListName__3qSGE",chatListPage:"Message_chatListPage__JVSQG"}},83:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(127),s=function(e,t){return e?n.a.error({message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430",description:t}):n.a.success({message:"\u0423\u0441\u043f\u0456\u0445",description:t})}},95:function(e,t,a){e.exports={chatMessage:"ChatMessage_chatMessage__rbyZZ",chatMessageRow:"ChatMessage_chatMessageRow__2y_dM",chatMessagePage:"ChatMessage_chatMessagePage__2kufA",chatMessageInput:"ChatMessage_chatMessageInput__ol-7E",chatMessageEmoji:"ChatMessage_chatMessageEmoji__3ls4m",chatMessageTyping:"ChatMessage_chatMessageTyping__2bCTW",chatMessageButton:"ChatMessage_chatMessageButton__3dl94"}},99:function(e,t,a){"use strict";var n=a(199),s=a(180),c=a.n(s),r=a(4);t.a=function(){return Object(r.jsx)("div",{className:c.a.loading,children:Object(r.jsx)(n.a,{})})}}},[[293,4,5]]]);
//# sourceMappingURL=main.36c7e415.chunk.js.map