(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[3],{124:function(e,t,a){e.exports={app:"Layout_app__1F26c",main:"Layout_main__2gk5w",title:"Layout_title__3wAWD"}},125:function(e,t,a){e.exports={chatTitle:"ChatHeader_chatTitle__WJPXV",chatUserName:"ChatHeader_chatUserName__1TAYg",closeButton:"ChatHeader_closeButton__2IYD4"}},126:function(e,t,a){e.exports={chat:"ChatList_chat__18vs5",chatEmpty:"ChatList_chatEmpty__3JVib",chatList:"ChatList_chatList__3va2e",chatListMessage:"ChatList_chatListMessage__20VMr",chatListMessageMy:"ChatList_chatListMessageMy__WOrl6",chatListWrapper:"ChatList_chatListWrapper__k2YWW",chatListTime:"ChatList_chatListTime__nquCK",chatListWrap:"ChatList_chatListWrap__KfX5J",chatListName:"ChatList_chatListName__8sx0G",chatListPage:"ChatList_chatListPage__3KvQA"}},136:function(e,t,a){e.exports={footer:"Footer_footer__T1BI6",footerCopyright:"Footer_footerCopyright__1Nolv"}},170:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return h}));var n=a(22),s=a.n(n),c=a(31),r=a(65),i=a.n(r),o=a(50),u=function(){var e=Object(c.a)(s.a.mark((function e(t,a,n){var c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(o.c)("JWToken"),e.next=3,i.a.get("".concat("https://footbet.site/api","/users/").concat(t,"/").concat(a,"/").concat(n),{headers:{Authorization:c}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),h=function(){var e=Object(c.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(o.c)("JWToken"),e.next=3,i.a.get("".concat("https://footbet.site/api","/users/me"),{headers:{Authorization:t}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},179:function(e,t,a){e.exports={loading:"Loading_loading__3mczw"}},182:function(e,t,a){e.exports={button:"Chat_button__31vsn"}},192:function(e,t,a){},292:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a(23),c=a.n(s),r=(a(192),a(19)),i=a(53),o=a(184),u=a(6),h=a.n(u),l=a(37),d=a(55),j=a.n(d),b=a(5),m=function(){return Object(b.jsx)("header",{className:j.a.header,children:Object(b.jsxs)("nav",{className:j.a.headerNav,children:[Object(b.jsxs)("ul",{className:j.a.headerList,children:[Object(b.jsx)("li",{className:j.a.headerListItem,children:Object(b.jsx)(i.b,{to:"/",children:"\u0413\u043e\u043b\u043e\u0432\u043d\u0430"})}),Object(b.jsx)("li",{className:j.a.headerListItem,children:Object(b.jsx)(i.b,{to:"/tournaments",children:"\u0422\u0443\u0440\u043d\u0456\u0440\u0438"})}),Object(b.jsx)("li",{className:j.a.headerListItem,children:Object(b.jsx)(i.b,{to:"/rules",children:"\u041f\u0440\u0430\u0432\u0438\u043b\u0430"})})]}),Object(b.jsx)("ul",{className:j.a.headerAdditionalList,children:Object(b.jsx)("li",{className:j.a.headerAdditionalListItem,children:Object(b.jsx)(i.b,{to:"/profile",children:"\u041f\u0440\u043e\u0444\u0456\u043b\u044c"})})})]})})},f=a(136),g=a.n(f),p=function(){return Object(b.jsx)("footer",{className:g.a.footer,children:Object(b.jsx)("div",{className:g.a.footerCopyright,children:"Footbet.site \xa9 2021 Created by David Amerov"})})},O=a(124),_=a.n(O),x=a(22),v=a.n(x),L=a(31),y=a(79),M=a(300),C=a(304),N=a(303),w=a(299),T=a(97),k=a.n(T),S=a(81),I=a(297),W=a(99),A=a(298),E=a(142),P=a(301),z=a(125),B=a.n(z);function J(e){var t=e.name,a=e.toggleShowChat;return Object(b.jsxs)("div",{className:B.a.chatTitle,children:[Object(b.jsx)("button",{type:"button",className:B.a.closeButton,onClick:a,children:Object(b.jsx)(E.a,{})}),Object(b.jsx)(A.a,{style:{backgroundColor:"#28374d"},icon:Object(b.jsx)(P.a,{})}),Object(b.jsx)("span",{className:B.a.chatUserName,children:t})]})}var H=a(302),F=a(186),R=a(95),U=a.n(R);function D(e){var t=e.handleSendMessage,a=Object(n.useContext)(l.d),s=Object(n.useState)(""),c=Object(r.a)(s,2),i=c[0],o=c[1],u=Object(n.useState)([]),h=Object(r.a)(u,2),d=h[0],j=h[1],m=Object(n.useContext)(l.b),f=function(){o(""),t(i),setTimeout((function(){var e=document.getElementById("chat-list");e.scrollTo(0,e.scrollHeight)}),0)};return Object(n.useEffect)((function(){var e=a.name;return m.on("typingUsers",(function(e){j(e)})),function(){m.emit("messageTyping",{name:e,typing:!1}),m.off("typingUsers")}}),[]),Object(b.jsxs)("div",{className:U.a.chatMessage,children:[Object(b.jsxs)("span",{className:U.a.chatMessageTyping,children:[d.map((function(e,t){return"".concat(t?", ":""," ").concat(e)}))," ",d.length?" \u043d\u0430\u0431\u0438\u0440\u0430\u0454 \u043f\u043e\u0432\u0456\u0434\u043e\u043c\u043b\u0435\u043d\u043d\u044f...":""]}),Object(b.jsxs)("div",{className:U.a.chatMessageRow,id:"message",children:[Object(b.jsx)(F.a,{onEnter:f,onChange:function(e){o(e);var t=a.name;e?m.emit("messageTyping",{name:t,typing:!0}):m.emit("messageTyping",{name:t,typing:!1})},value:i,fontFamily:"Rubik",height:40,placeholder:"\u041d\u0430\u043f\u0438\u0448\u0456\u0442\u044c \u043f\u043e\u0432\u0456\u0434\u043e\u043c\u043b\u0435\u043d\u043d\u044f"}),Object(b.jsx)("button",{onClick:f,disabled:!i.length||!i.replace(/\s/g,"").length,className:U.a.chatMessageButton,type:"submit",children:Object(b.jsx)(H.a,{})})]})]})}var q=a(126),V=a.n(q),K=a(96),X=a(294),Y=a(293),Z=function(e){var t=e.message,a=e.removeMessage;return Object(b.jsx)(Y.a,{children:Object(b.jsx)(Y.a.Item,{onClick:function(){return a(t)},children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"},"1")})},G=a(60),Q=a.n(G),$=function(e){var t=e.item,a=e.id,n=e.removeMessage;return Object(b.jsx)("li",{className:h()(Q.a.chatListMessage,Object(K.a)({},Q.a.chatListMessageMy,t.user.id===a)),children:Object(b.jsx)(X.a,{disabled:t.user.id!==a,overlay:Object(b.jsx)(Z,{removeMessage:n,message:t}),trigger:["contextMenu"],children:Object(b.jsx)("div",{className:Q.a.chatListWrapper,children:Object(b.jsxs)("div",{className:Q.a.chatListWrap,children:[t.user.id!==a&&Object(b.jsx)("div",{className:Q.a.chatListName,children:t.user.name}),Object(b.jsxs)("div",{className:Q.a.chatListText,children:[t.message,Object(b.jsx)("span",{className:Q.a.chatListTime,children:k()(t.createdAt).format("HH:mm")})]})]})})})})};function ee(e){var t=e.messages,a=e.handleSendMessage,s=e.toggleShowChat,c=e.removeMessage,i=Object(n.useContext)(l.d),o=i.id,u=i.name,h=Object(n.useState)(!0),d=Object(r.a)(h,2),j=d[0],m=d[1];return Object(n.useEffect)((function(){var e;document.documentElement.style.overflow="hidden",window.localStorage.setItem("unreaded-messages",0);var t=null===(e=document)||void 0===e?void 0:e.getElementById("chat-list");null===t||void 0===t||t.scrollTo(0,t.scrollHeight),setTimeout((function(){m(!1)}),100)}),[]),Object(b.jsxs)("div",{className:V.a.chat,children:[Object(b.jsx)(J,{name:u,toggleShowChat:s}),j?Object(b.jsx)(W.a,{}):Object(b.jsx)(b.Fragment,{children:t.length<1?Object(b.jsx)("div",{className:V.a.chatEmpty,children:Object(b.jsx)(S.a,{description:"\u041f\u043e\u0432\u0456\u0434\u043e\u043c\u043b\u0435\u043d\u044c \u0449\u0435 \u043d\u0435\u043c\u0430\u0454 \ud83d\ude22"})}):Object(b.jsx)("ul",{id:"chat-list",className:V.a.chatList,children:t.map((function(e){return Object(b.jsxs)("div",{children:[Object(b.jsx)(I.a,{styles:{fontWeight:"bold"},children:k()(e.date).format("LL")}),Object(b.jsx)(N.a,{component:"ul",className:"todo-list",children:e.days.map((function(e){return Object(b.jsx)(w.a,{classNames:"item",timeout:200,children:Object(b.jsx)($,{id:o,item:e,removeMessage:c})},e.id)}))})]},e.id)}))})}),Object(b.jsx)(D,{handleSendMessage:a})]})}var te=a(182),ae=a.n(te),ne=a(83),se=a(65),ce=a.n(se),re=a(50),ie=function(){var e=Object(L.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(re.b)("JWToken"),e.next=3,ce.a.get("".concat("https://footbet.site/api","/chat"),{headers:{Authorization:t}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=Object(L.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(re.b)("JWToken"),e.next=3,ce.a.delete("".concat("https://footbet.site/api","/chat/").concat(t),{headers:{Authorization:a}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function ue(){var e=Object(n.useContext)(l.d),t=e.id,a=e.name,s=Object(n.useState)(!1),c=Object(r.a)(s,2),i=c[0],o=c[1],u=Object(n.useState)(0),h=Object(r.a)(u,2),d=h[0],j=h[1],m=Object(n.useState)([]),f=Object(r.a)(m,2),g=f[0],p=f[1],O=Object(n.useContext)(l.b),_=function(){o(!i)};Object(n.useEffect)((function(){var e=function(){var e=Object(L.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ie();case 3:(t=e.sent).status&&200===t.status&&p(t.data),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),404!==e.t0.response.status&&Object(ne.a)(!0,e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[i]),Object(n.useEffect)((function(){return j(Number(window.localStorage.getItem("unreaded-messages"))||0),O.on("message",(function(e){j((function(e){return window.localStorage.setItem("unreaded-messages",e+1),e+1})),p((function(t){var a=Object(y.a)(t);return a[t.length-1].days.push(e),a}))})),function(){O.off("message"),document.documentElement.style.overflow="unset"}}),[i]);var x=function(e){var t=e.createdAt.split("T")[0],a=Object(y.a)(g),n=a.findIndex((function(e){return e.date===t})),s=a[n].days.findIndex((function(t){return Number(t.id)===Number(e.id)}));a[n].days.splice(s,1),p(a)},N=function(){var e=Object(L.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(t),e.prev=1,e.next=4,oe(t.id);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),Object(ne.a)(!0,e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsx)(b.Fragment,{children:i?Object(b.jsx)(ee,{messages:g,handleSendMessage:function(e){O.emit("chatMessage",e);var n={id:g[g.length-1].days[g[g.length-1].days.length-1].id+10,message:e,createdAt:(new Date).toISOString(),user:{id:t,name:a}},s=Object(y.a)(g);s[g.length-1].days.push(n),p(s)},toggleShowChat:_,removeMessage:N}):Object(b.jsx)("div",{className:ae.a.button,children:Object(b.jsx)("button",{onClick:_,type:"button",children:Object(b.jsx)(M.a,{size:"default",count:d,children:Object(b.jsx)(C.a,{style:{color:"#fff",fontSize:"25px"}})})})})})}var he=function(e){var t=e.auth,a=e.socket,s=e.user,c=e.children,i=Object(n.useState)("Footbet"),o=Object(r.a)(i,2),u=o[0],d=o[1];return Object(b.jsx)(l.a.Provider,{value:t,children:Object(b.jsx)(l.b.Provider,{value:a,children:Object(b.jsx)(l.d.Provider,{value:s,children:Object(b.jsx)(l.c.Provider,{value:{title:u,setTitle:d},children:Object(b.jsxs)("div",{className:h()(_.a.app,"app"),children:[t&&Object(b.jsx)(m,{}),Object(b.jsxs)("main",{className:_.a.main,children:[Object(b.jsx)("h1",{className:_.a.title,children:u}),c]}),Object(b.jsx)(p,{}),s&&a&&Object(b.jsx)(ue,{})]})})})})})},le=a(10),de=Object(n.lazy)((function(){return a.e(12).then(a.bind(null,343))})),je=Object(n.lazy)((function(){return a.e(10).then(a.bind(null,344))})),be=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(1),a.e(6),a.e(7)]).then(a.bind(null,351))})),me=Object(n.lazy)((function(){return a.e(11).then(a.bind(null,345))})),fe=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(2),a.e(9)]).then(a.bind(null,346))})),ge=Object(n.lazy)((function(){return Promise.all([a.e(14),a.e(13)]).then(a.bind(null,347))})),pe=function(){return Object(le.h)([{path:"/",element:Object(b.jsx)(de,{})},{path:"/tournaments",element:Object(b.jsx)(je,{})},{path:"/tournament/:slug",element:Object(b.jsx)(be,{})},{path:"/rules",element:Object(b.jsx)(me,{})},{path:"/profile",element:Object(b.jsx)(fe,{})},{path:"*",element:Object(b.jsx)(ge,{})}])},Oe=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(1),a.e(2),a.e(8)]).then(a.bind(null,356))})),_e=function(){return Object(le.h)([{path:"/",element:Object(b.jsx)(Oe,{})},{path:"*",element:Object(b.jsx)(le.a,{to:"/"})}])};var xe=function(){var e=Object(n.useState)(null),t=Object(r.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(null),u=Object(r.a)(c,2),h=u[0],l=u[1];Object(n.useEffect)((function(){var e=Object(re.b)("JWToken"),t=Object(o.a)("http://localhost:3000",{query:{token:e}});return s(t),t.on("user",(function(e){l(JSON.parse(e))})),function(){t.close()}}),[]);var d=Object(re.a)();return Object(b.jsx)(i.a,{children:Object(b.jsx)(he,{socket:a,user:h,auth:d,children:Object(b.jsx)(n.Suspense,{fallback:Object(b.jsx)(W.a,{}),children:d?Object(b.jsx)(pe,{}):Object(b.jsx)(_e,{})})})})},ve=function(e){e&&e instanceof Function&&a.e(15).then(a.bind(null,348)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),c(e),r(e)}))};c.a.render(Object(b.jsx)(xe,{}),document.getElementById("root")),ve()},37:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return i})),a.d(t,"d",(function(){return o}));var n=a(0),s=a.n(n),c=s.a.createContext(!1),r=s.a.createContext({}),i=s.a.createContext({}),o=s.a.createContext({})},50:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"e",(function(){return c})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return i})),a.d(t,"d",(function(){return o}));a(22),a(31);var n=a(94),s=(a(170),a(83),function(e){var t=document.cookie.match(new RegExp("(?:^|; )".concat(e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1"),"=([^;]*)")));return t?decodeURIComponent(t[1]):void 0}),c=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(a=Object(n.a)({path:"/"},a)).expires instanceof Date&&(a.expires=a.expires.toUTCString());var s="".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t));for(var c in a){s+="; ".concat(c);var r=a[c];!0!==r&&(s+="=".concat(r))}document.cookie=s},r=function(){return"Bearer ".concat(s("JWToken"))};function i(){return Boolean(s("JWToken"))}var o=function(){c("JWToken","",{"max-age":-1}),window.location.href="/"}},55:function(e,t,a){e.exports={header:"Header_header__1OmjH",headerNav:"Header_headerNav__1KtTN",headerList:"Header_headerList__3a_My",headerAdditionalList:"Header_headerAdditionalList__VAqhq",headerListItem:"Header_headerListItem__ZfNQt",headerAdditionalListItem:"Header_headerAdditionalListItem__2jrXD"}},60:function(e,t,a){e.exports={chat:"Message_chat__2ALNA",chatList:"Message_chatList__24kzI",chatListMessage:"Message_chatListMessage__1tbSy",chatListMessageMy:"Message_chatListMessageMy__yv4PX",chatListWrapper:"Message_chatListWrapper__23BRB",chatListTime:"Message_chatListTime__1lYDR",chatListWrap:"Message_chatListWrap__1FwCZ",chatListName:"Message_chatListName__3qSGE",chatListPage:"Message_chatListPage__JVSQG"}},83:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(127),s=function(e,t){return e?n.a.error({message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430",description:t}):n.a.success({message:"\u0423\u0441\u043f\u0456\u0445",description:t})}},95:function(e,t,a){e.exports={chatMessage:"ChatMessage_chatMessage__rbyZZ",chatMessageRow:"ChatMessage_chatMessageRow__2y_dM",chatMessagePage:"ChatMessage_chatMessagePage__2kufA",chatMessageInput:"ChatMessage_chatMessageInput__ol-7E",chatMessageEmoji:"ChatMessage_chatMessageEmoji__3ls4m",chatMessageTyping:"ChatMessage_chatMessageTyping__2bCTW",chatMessageButton:"ChatMessage_chatMessageButton__3dl94"}},99:function(e,t,a){"use strict";var n=a(198),s=a(179),c=a.n(s),r=a(5);t.a=function(){return Object(r.jsx)("div",{className:c.a.loading,children:Object(r.jsx)(n.a,{})})}}},[[292,4,5]]]);
//# sourceMappingURL=main.0778fdb7.chunk.js.map